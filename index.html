<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Check-in</title>
<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #fff;
  }

  .box {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    padding: 28px;
    border-radius: 20px;
    width: 300px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  }

  h1 {
    font-size: 22px;
    margin-bottom: 10px;
    font-weight: 600;
  }

  h2 {
    font-size: 18px;
    margin: 20px 0 8px;
    font-weight: 500;
  }

  button {
    width: 100%;
    padding: 14px;
    margin-top: 12px;
    border: none;
    border-radius: 14px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.15s ease, opacity 0.15s ease;
  }

  button:active {
    transform: scale(0.97);
  }

  .yes {
    background: linear-gradient(135deg, #ff4e8d, #ff6fa5);
    color: #fff;
  }

  .maybe {
    background: rgba(255,255,255,0.15);
    color: #fff;
  }

  .no {
    background: rgba(255,255,255,0.08);
    color: #ccc;
  }

  .status {
    margin-top: 18px;
    font-size: 14px;
    opacity: 0.85;
  }
</style>
</head>
<body>

<div class="box">
  <h4>Check-in</h4>

  <select id="user">
    <option value="kafis">kafis</option>
    <option value="yas">yas</option>
  </select>

  <button onclick="send('Dispon√≠vel')">Dispon√≠vel</button>
  <button onclick="send('Indispon√≠vel')">Indispon√≠vel</button>

  <p id="view"></p>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbySwv5c-MDw89w_9Akj8kX9ZLGv_uYUl5ONejlDelO6TXHHUzoInt-yBzqxx5cGlvCEMw/exec";

function send(status){
  const u = document.getElementById("user").value;
  fetch(API,{
    method:"POST",
    body:new URLSearchParams({user:u,status:status})
  });
}

setInterval(()=>{
  fetch(API + "?t=" + Date.now())
    .then(r=>r.json())
    .then(d=>{
      const kafis = d.find(x => x[0] === "kafis")?.[1];
      const yas   = d.find(x => x[0] === "yas")?.[1];

      let msg = "Aguardando check-in";

      if(kafis && yas){
        if(kafis === "Dispon√≠vel" && yas === "Dispon√≠vel"){
          msg = "‚ú® Match confirmado";
        } else {
          msg = "üåô Hoje n√£o";
        }
      }

      document.getElementById("view").innerText = msg;
    });
},2000);
</script>

</body>
</html>
